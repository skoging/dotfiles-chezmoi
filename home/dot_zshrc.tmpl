export XDG_DATA_HOME=$HOME/.local/share
export XDG_CONFIG_HOME=$HOME/.config
export XDG_STATE_HOME=$HOME/.local/state
export XDG_CACHE_HOME=$HOME/.cache

# If you come from bash you might have to change your $PATH.
{{- $paths := list }}
{{- $homeDir := .chezmoi.homeDir }}
{{- range $_, $relPath := list "bin" "go/bin" ".cargo/bin" ".local/bin" }}
{{    $path := joinPath $homeDir $relPath }}
{{-   if stat $path }}
{{-     $paths = mustAppend $paths $path }}
{{-   end }}
{{- end }}
{{- if $paths }}
export PATH={{ toStrings $paths | join ":" }}:$PATH
{{- end }}

# Uncomment the following line to use case-sensitive completion.
CASE_SENSITIVE="true"

# Uncomment the following line to disable bi-weekly auto-update checks.
DISABLE_AUTO_UPDATE="true"

# Uncomment the following line if you want to change the command execution time
# stamp shown in the history command output.
# The optional three formats: "mm/dd/yyyy"|"dd.mm.yyyy"|"yyyy-mm-dd"
HIST_STAMPS="yyyy-mm-dd"

ZSH_DISABLE_COMPFIX=true

setopt autocd
setopt histignorespace
setopt rm_star_silent

# History configuration
HISTFILE="${XDG_STATE_HOME}/zsh/history"
HISTSIZE=10000
SAVEHIST=10000
setopt appendhistory
setopt sharehistory
setopt incappendhistory
setopt hist_ignore_dups
setopt hist_ignore_all_dups
setopt hist_find_no_dups
setopt hist_save_no_dups

# Create history directory if it doesn't exist
mkdir -p "$(dirname "$HISTFILE")"

alias g=git
alias gnp="git --no-pager"
{{- if lookPath "bat" }}
alias cat=bat
{{- else if lookPath "batcat" }}
alias cat=batcat
{{- end }}
{{- if lookPath "fdfind" }}
alias fd=fdfind
{{- end }}
{{- if lookPath "eza" }}
alias ls=eza
{{- end }}

{{ if lookPath "code" -}}
export EDITOR="code --wait"
{{ else -}}
export EDITOR=nano
{{ end -}}
{{ if not .ephemeral -}}
{{ end -}}
export GOBIN=$HOME/.local/bin
export GOPATH=$HOME
export GO111MODULE=on
export LANG=en_US.UTF-8
export RIPGREP_CONFIG_PATH=~/.config/ripgrep/config
export STARSHIP_CONFIG=~/.config/starship/starship.toml

{{ if stat (joinPath .chezmoi.homeDir ".nvm") }}
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"  # This loads nvm bash_completion
{{ end }}

[ -f "$XDG_CONFIG_HOME/zsh/autosuggestions.zsh" ] && source "$XDG_CONFIG_HOME/zsh/autosuggestions.zsh"
[ -f "$XDG_CONFIG_HOME/zsh/history.zsh" ] && source "$XDG_CONFIG_HOME/zsh/history.zsh"
[ -f "$XDG_CONFIG_HOME/zsh/zoxide.zsh" ] && source "$XDG_CONFIG_HOME/zsh/zoxide.zsh"
[ -f "$XDG_CONFIG_HOME/zsh/syntax-highlighting.zsh" ] && source "$XDG_CONFIG_HOME/zsh/syntax-highlighting.zsh"

{{- if lookPath "starship" }}
eval "$(starship init zsh)"
{{ end -}}